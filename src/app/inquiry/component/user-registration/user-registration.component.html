<div class="add-course-container">
  <div class="page-header">
    <h2>{{ isEditMode ? 'Update User' : 'Add User' }}</h2>
  </div>

  <div class="container mt-4">
    <mat-card class="shadow-lg p-4">
      <form [formGroup]="userRegistrationForm" (ngSubmit)="saveUser()">

        <div class="row">
          <div class="col-md-6 mb-3">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>First Name*</mat-label>
              <input matInput formControlName="firstName" placeholder="Enter first name" />
              <mat-error *ngIf="submitted && f['firstName'].errors?.['required']">
                First name is required
              </mat-error>
            </mat-form-field>
          </div>

          <div class="col-md-6 mb-3">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Last Name*</mat-label>
              <input matInput formControlName="lastName" placeholder="Enter last name" />
              <mat-error *ngIf="submitted && f['lastName'].errors?.['required']">
                Last name is required
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Date of Birth*</mat-label>
              <input matInput [matDatepicker]="picker" formControlName="dob" />
              <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
              <mat-datepicker #picker></mat-datepicker>
              <mat-error *ngIf="submitted && f['dob'].errors?.['required']">
                Date of Birth is required
              </mat-error>
            </mat-form-field>
          </div>

          <div class="col-md-6 mb-3">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>User Type*</mat-label>
              <mat-select formControlName="userTypeId">
                <mat-option value="">Select user type</mat-option>
                <mat-option value="1">Student</mat-option>
                <mat-option value="2">Trainer</mat-option>
                <mat-option value="3">Admin</mat-option>
              </mat-select>
              <mat-error *ngIf="submitted && f['userTypeId'].errors?.['required']">
                User Type is required
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Email*</mat-label>
              <input matInput type="email" formControlName="email" placeholder="Enter email" />
              <mat-error *ngIf="submitted && f['email'].errors?.['required']">
                Email is required
              </mat-error>
              <mat-error *ngIf="submitted && f['email'].errors?.['email']">
                Enter a valid email
              </mat-error>
            </mat-form-field>
          </div>

          <div class="col-md-6 mb-3">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Mobile*</mat-label>
              <input matInput formControlName="mobile" placeholder="Enter mobile number" />
              <mat-error *ngIf="submitted && f['mobile'].errors?.['required']">
                Mobile number is required
              </mat-error>
              <mat-error *ngIf="submitted && f['mobile'].errors?.['pattern']">
                Mobile must be 10 digits
              </mat-error>
            </mat-form-field>
          </div>
        </div>

        <mat-form-field appearance="outline" class="w-100 mb-3">
          <mat-label>Password*</mat-label>
          <input matInput type="password" formControlName="password" placeholder="Enter password" />
          <mat-error *ngIf="submitted && f['password'].errors?.['required']">
            Password is required
          </mat-error>
          <mat-error *ngIf="submitted && f['password'].errors?.['pattern']">
            Must contain at least 8 characters, one uppercase, one lowercase, one number, and one special character.
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-100 mb-3">
          <mat-label>Address One*</mat-label>
          <input matInput formControlName="addressLineOne" placeholder="Enter address" />
          <mat-error *ngIf="submitted && f['addressLineOne'].errors?.['required']">
            Address is required
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="w-100 mb-3">
          <mat-label>Address Two</mat-label>
          <input matInput formControlName="addressLineTwo" placeholder="Enter address" />
        </mat-form-field>

        <div class="row">
          <div class="col-md-6 mb-3">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Country*</mat-label>
              <input matInput formControlName="country" placeholder="Enter country" />
              <mat-error *ngIf="submitted && f['country'].errors?.['required']">Country is required</mat-error>
            </mat-form-field>
          </div>

          <div class="col-md-6 mb-3">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>State*</mat-label>
              <input matInput formControlName="state" placeholder="Enter state" />
              <mat-error *ngIf="submitted && f['state'].errors?.['required']">State is required</mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>City*</mat-label>
              <input matInput formControlName="city" placeholder="Enter city" />
              <mat-error *ngIf="submitted && f['city'].errors?.['required']">City is required</mat-error>
            </mat-form-field>
          </div>

          <div class="col-md-6 mb-3">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Postal Code*</mat-label>
              <input matInput formControlName="postalCode" placeholder="Enter postal code" />
              <mat-error *ngIf="submitted && f['postalCode'].errors?.['required']">Postal code is required</mat-error>
            </mat-form-field>
          </div>
        </div>

        <div class="row">
          <div class="col-md-6 mb-3">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Education*</mat-label>
              <input matInput formControlName="educationTitle" placeholder="Enter education" />
              <mat-error *ngIf="submitted && f['educationTitle'].errors?.['required']">Education is required</mat-error>
            </mat-form-field>
          </div>

          <div class="col-md-6 mb-3">
            <mat-form-field appearance="outline" class="w-100">
              <mat-label>Passing Year*</mat-label>
              <input matInput type="number" formControlName="passingYear" placeholder="Enter passing year" />
              <mat-error *ngIf="submitted && f['passingYear'].errors?.['required']">Passing year is required</mat-error>
            </mat-form-field>
          </div>
        </div>

        <mat-form-field appearance="outline" class="w-100 mb-3">
          <mat-label>Description</mat-label>
          <textarea matInput rows="3" formControlName="description" placeholder="Short description"></textarea>
          <mat-error *ngIf="submitted && f['description'].errors?.['required']">
            Description is required
          </mat-error>
        </mat-form-field>

        <div class="text-end">
          <button mat-stroked-button color="warn" type="button" (click)="onCancel()" class="me-2">Cancel</button>
          <button mat-raised-button color="primary" type="submit">
            {{ isEditMode ? 'Update' : 'Register' }}
          </button>
        </div>
      </form>
    </mat-card>
  </div>
</div>
